## 서론
서버에 요청을 한 클라이언트가 신뢰할 수 있는 요청자인지 판단하기 위해 인증(Authorization)단계는 필수적이다.   
다양한 인증방식을 알아보고, 웹을 구현할 때 어떤 방식을 사용하는 것이 나을지 판단할 수 있는 지표를 얻어보자.


## HTTP 통신 방법
> HTTP(HyperText Transfer Protocol)란 인터넷에서 정보를 주고받을 수 있게 해주는 프로토콜이다. 주로 HTML 문서나 웹 리소스를 주고 받을 때 사용된다.

HTTP 통신은 클라이언트-서버 간에 웹 리소스를 주고 받을 때 사용된다.    
클라이언트(웹 브라우저)가 서버에 요청을 보내면, 서버는 요청한 리소스를 보내준다.   
이때 요청자만 접근할 수 있는 보호된 리소스(요청자의 블로그 글 등)에 접근하기 위해서는, 이 요청자가 신뢰할 수 있는 사람인지 확인하는 인증 정보(Credentials)가 있어야 한다.   
아래와 같은 형식으로 인증 헤더 정보를 추가하는데, 'type' 에는 인증방식을 명시한다. 여기에는 'Basic'과 'Bearer' 인증 방식이 있다.
```
Autorization : <type> <credentials>
```


## Basic 인증
```
Autorization : Basic base64({사용자ID}:{비밀번호})
```
인증정보로 사용자ID, 비밀번호를 사용한다. '사용자ID:비밀번호'문자열을 base64로 인코딩하여 인증헤더에 입력한다.   
base64 형식은 쉽게 복호화할 수 있어 보안이 보장되지 않기 때문에, 보안력이 높은 HTTPS, SSL/TLS로 통신해야 한다.
이 방식은 매우 간단하여 구축하기 쉽다는 장점이 있다.   
그러나, 서버에 사용자 목록을 저장하기 때문에 요청 리소스가 많거나 사용자가 많으면 권한을 확인하는 시간이 길어진다. 또한 저장 가능한 공간이 한정되어 있으므로 사용자가 많은 서비스를 운영하기 위해서는 서버에 부담이 커진다.
또한, 이 방식만으로는 사용자 권한을 정교하게 제어할 수 없다.


## Bearer 인증
```
Autorization : Bearer {토큰}
```
OAuth2.0 프레임워크에서 사용하는 토큰 인증 방식이다.   
OAuth2.0 프레임워크는 제 3자의 클라이언트에게 보호된 리소스를 제한적으로 접근하게 해주는 프레임워크이다.   
해당 프레임워크는 리소스 소유자, 클라이언트, 인증 서버, 리소스 서버로 구성된다.   
예를 들어, '오늘의 집' 어플에 '네이버' 계정을 사용하여 소셜 로그인 하는 상황으로 생각해보면 아래와 같은 과정을 거친다.   
```
- 리소스 소유자 : 나
- 클라이언트 : 오늘의 집
- 인증 서버 : 네이버
- 리소스 서버 : 네이버

<인증 과정>
나는 '오늘의 집'에 네이버계정을 통해 로그인을 요청한다.   
'오늘의 집'이 나에게 권한 접근에 동의하느냐고 물어보고, 나는 '동의'를 누른다.   
'오늘의 집'이 '네이버'에 리소스 권한 접근을 요청한다.   
'네이버'는 '오늘의 집'에게 액세스 토큰을 발급해준다.   
'오늘이 집'은 액세스 토큰을 이용하여 리소스 서버에 보호된 계정 데이터를 불러와서 인증에 사용한다.   
```
이 방식은 안전하고, 확장이 쉽다는 장점이 있다.   
Bearer 토큰은 복호화가 어려운데, OAuth 프레임워크의 인증 및 리소스 서버는 SSL/TLS를 필수로 사용하기 때문에 보안에 안정적이다.   
그리고 서버에서 토큰의 리소스 접근 권한을 쉽게 철회가능하고 토큰 유효기간도 정할 수 있어서 더 안전하다. 리소스 접근도 정교하게 설정할 수 있어서 Basic보다 확장성이 크다.   
이 토큰 자체에 메타데이터가 저장되어 있기 때문에, 서버는 토큰을 발급만 해주고 저장할 필요가 없어서 사용자가 많은 서비스를 운영할 때도 안정적이다.   
위 예시처럼 여러 서비스를 연동할 수 있게 해주는 등 사용자에게 편리한 경험을 제공할 수 있다.   
물론 토큰이 외부에 유출되면 사용자가 동의하지 않은 서비스에서 리소스에 접근할 수 있게되는데, OAuth에서 요구하는 보안 장치를 잘 구축하면 문제가 없으며 만약 유출되어도 권한을 철회할 수 있으므로 보안성으로는 Basic
보다 훨씬 안정적이다.

## 결론
HTTP통신에서 사용되는 인증방식으로 Basic과 Bearer 가 사용된다는 사실을 알게 되었다.   
각각의 장단점이 있는데, 단순히 보안적인 측면만이 아니라 점점 다양화되는 사용자의 요구를 반영하고 더 편리한 경험을 제공하기 위해서는 확장성이 큰 Bearer 방식을 채택하는 것이 낫겠다는 생각이 들었다.   


## References
- [velog / tosspayments, 'Basic 인증과 Bearer 인증의 모든 것'](https://velog.io/@tosspayments/Basic-%EC%9D%B8%EC%A6%9D%EA%B3%BC-Bearer-%EC%9D%B8%EC%A6%9D%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83)
